<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robot Design Report</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- model-viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>

    .hover-zoom {
  transition: transform 0.3s ease;
  cursor: zoom-in;
}

.hover-zoom:hover {
  transform: scale(1.6);
  z-index: 5;
}

    html { scroll-behavior: smooth; }

    /* ---------------------------------------------------- */
    /* GLOBAL FONT + BASE STYLES */
    /* ---------------------------------------------------- */
    * {
      font-family: "Times New Roman", Times, serif;
      font-size: 12pt;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #dfe4f0;
      /* reserve space for fixed sidebar so content can still be centered */
      padding-left: 260px;
    }

    p, li {
      line-height: 1.5;
    }

    /* ---------------------------------------------------- */
    /* SIDEBAR (FIXED, ALWAYS VISIBLE) */
    /* ---------------------------------------------------- */
    #sidebar {
      width: 260px;
      background: #111827;
      color: #ddd;
      padding: 20px 16px;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 10;
    }

    #sidebar h2 {
      color: #fff;
      margin: 0 0 12px 0;
      font-size: 14pt;
    }

    .toc-item { 
      list-style: none; 
      margin: 4px 0; 
    }

    .toc-link {
      color: #d1d5db;
      text-decoration: none;
      padding: 6px 8px;
      display: block;
      border-radius: 6px;
      transition: 0.15s;
    }

    .toc-link:hover {
      background: #374151;
      color: #fff;
    }

    .active-link {
      background: #2563eb !important;
      color: #fff !important;
      font-weight: bold;
    }

    /* LEVEL INDENTATION */
    .toc-level-1 { margin-left: 0; }
    .toc-level-2 { margin-left: 16px; }
    .toc-level-3 { margin-left: 32px; }

    /* Children container: hidden by default */
    .toc-children {
      display: none;
      margin-left: 12px;
      border-left: 1px solid #555;
      padding-left: 8px;
    }

    /* Only the active branch expands */
    .toc-expanded > .toc-children {
      display: block;
    }

    /* ---------------------------------------------------- */
    /* REPORT WRAPPER (CENTERED COLUMN) */
    /* ---------------------------------------------------- */
    .report-wrapper {
      max-width: 900px;
      margin: 24px auto 40px auto;  /* centered */
      padding: 0 12px;
    }

    [include-html] {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 10px;
      padding: 32px 40px;
      margin-bottom: 24px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    /* ---------------------------------------------------- */
    /* TITLES + SECTION DIVIDER LINE */
    /* ---------------------------------------------------- */
    .section-title,
    .subsection-title,
    .subsubsection-title,
    .subsubsubsection-title {
      position: relative;
      padding-top: 26px;
      margin-top: 40px;
      line-height: 1.5;
    }

    .section-title::before,
    .subsection-title::before,
    .subsubsection-title::before,
    .subsubsubsection-title::before {
      content: "";
      position: absolute;
      top: 8px;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(
        to right,
        rgba(0,0,0,0.10),
        rgba(0,0,0,0.25),
        rgba(0,0,0,0.10)
      );
      border-radius: 2px;
    }

    /* Title sizes */
    .section-title    { font-size: 20pt; font-weight: bold; }
    .subsection-title { font-size: 16pt; font-weight: bold; }
    .subsubsection-title { font-size: 14pt; font-weight: bold; font-style: normal; }
    .subsubsubsection-title { font-size: 12pt; font-weight: bold; text-decoration: underline; }

    /* ---------------------------------------------------- */
    /* EXPANDABLE BOXES */
    /* ---------------------------------------------------- */
    details.expand-box {
      margin: 14px 0 20px 0;
      padding: 14px 16px;
      border-radius: 8px;
      background: rgba(230, 236, 255, 0.55);
      cursor: pointer;
      border: 1px solid rgba(140, 160, 220, 0.3);
      transition: 0.25s ease;
    }

    details.expand-box[open] {
      background: rgba(210, 220, 255, 0.65);
      border-color: rgba(90, 110, 200, 0.45);
    }

    /* SUMMARY — remove ALL browser defaults */
    details.expand-box summary {
      cursor: pointer;
      list-style: none;
      margin: 0;
      padding: 0;
      font-weight: bold;
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }

    /* Remove default markers */
    details.expand-box summary::-webkit-details-marker { display: none; }
    details.expand-box summary::marker { content: ""; }

    /* Custom arrow */
    details.expand-box summary::before {
      content: "▶";
      font-size: 11pt;
      margin-right: 6px;
      transition: transform 0.2s ease;
    }

    details.expand-box[open] summary::before {
      content: "▼";
    }

    /* Remove divider line inside expandables */
    details.expand-box .section-title::before,
    details.expand-box .subsection-title::before,
    details.expand-box .subsubsection-title::before,
    details.expand-box .subsubsubsection-title::before {
      display: none !important;
    }

    /* Remove extra top spacing when heading is inside <summary> */
    details.expand-box summary.section-title,
    details.expand-box summary.subsection-title,
    details.expand-box summary.subsubsection-title,
    details.expand-box summary.subsubsubsection-title {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
  </style>

</head>

<body>

  <!-- SIDEBAR -->
  <nav id="sidebar">
    <h2>Contents</h2>
    <ul id="toc-root"></ul>
  </nav>

  <!-- MAIN CONTENT -->
  <div class="report-wrapper">

    <div include-html="Front Page.html"></div>
    <div include-html="/To be included/3D Renders.html"></div>

    <!-- Disclaimer with its own ID -->
    <div id="sec-0-disclaimer" include-html="Disclaimer.html"></div>

    <div include-html="1. Introduction.html"></div>
    <div include-html="2. Competition Background Information.html"></div>
    <div include-html="3. Problem Clarification.html"></div>
    <div include-html="4. Design Thinking Process.html"></div>
    <div include-html="5. Finalised Main Design Concept Validation and Prototyping.html"></div>
    <div include-html="6. Overall Prototyping Testing.html"></div>
    <div include-html="7. Moving Forward.html"></div>
    <div include-html="8. Conclusion.html"></div>
    <div include-html="References.html"></div>

  </div>


  <!-- JS SECTION -->
  <script>
    /* ========== INCLUDE HTML PARTIALS ========== */
    async function includeHTML() {
      const elements = document.querySelectorAll("[include-html]");
      for (const el of elements) {
        const file = el.getAttribute("include-html");
        try {
          const resp = await fetch(file);
          el.innerHTML = resp.ok ? await resp.text() : "Include error: " + resp.status;
        } catch (err) {
          el.innerHTML = "Include error: " + err;
        }
      }

      generateTOC();
      initScrollSpy();
      initExpandAccordion();
    }

    /* ========== TOC GENERATOR (uses headings directly) ========== */
    function generateTOC() {
      const tocRoot = document.getElementById("toc-root");
      tocRoot.innerHTML = "";

      const headings = document.querySelectorAll(
        ".section-title, .subsection-title, .subsubsection-title"
      );

      let lastLevel1 = null;
      let lastLevel2 = null;

      headings.forEach((h, index) => {
        const text = h.textContent.trim();
        if (!text) return;

        let level = 1;
        if (h.classList.contains("subsection-title")) level = 2;
        if (h.classList.contains("subsubsection-title")) level = 3;

        // Ensure each heading has a unique ID
        let id = h.id;
        if (!id) {
          id = `sec-auto-${level}-${index}`;
          h.id = id;
        }

        const li = document.createElement("li");
        li.classList.add("toc-item", `toc-level-${level}`);

        const link = document.createElement("a");
        link.classList.add("toc-link");
        link.href = "#" + id;
        link.textContent = text;

        li.appendChild(link);

        if (level === 1) {
          const childList = document.createElement("ul");
          childList.classList.add("toc-children");
          li.appendChild(childList);

          tocRoot.appendChild(li);
          lastLevel1 = li;
          lastLevel2 = null;
        } else if (level === 2) {
          if (lastLevel1) {
            const childList = lastLevel1.querySelector(".toc-children");
            childList.appendChild(li);

            const childList2 = document.createElement("ul");
            childList2.classList.add("toc-children");
            li.appendChild(childList2);

            lastLevel2 = li;
          } else {
            tocRoot.appendChild(li);
          }
        } else if (level === 3) {
          if (lastLevel2) {
            const childList3 = lastLevel2.querySelector(".toc-children");
            childList3.appendChild(li);
          } else if (lastLevel1) {
            const childList = lastLevel1.querySelector(".toc-children");
            childList.appendChild(li);
          } else {
            tocRoot.appendChild(li);
          }
        }
      });
    }

    /* ========== SCROLL SPY (nearest heading to top) ========== */
    function initScrollSpy() {
      const links = document.querySelectorAll(".toc-link");
      const headings = document.querySelectorAll(
        ".section-title, .subsection-title, .subsubsection-title"
      );

      if (!headings.length) return;

      // map id -> link
      const linkMap = {};
      links.forEach(link => {
        const href = link.getAttribute("href");
        if (href && href.startsWith("#")) {
          const id = href.slice(1);
          linkMap[id] = link;
        }
      });

      function setActiveByHeading(heading) {
        const id = heading.id;
        if (!id) return;
        const activeLink = linkMap[id];
        if (!activeLink) return;

        // 1) Clear active state
        links.forEach(l => l.classList.remove("active-link"));
        activeLink.classList.add("active-link");

        // 2) Collapse all branches
        document.querySelectorAll("#toc-root .toc-item").forEach(li => {
          li.classList.remove("toc-expanded");
        });

        // 3) Expand ancestors chain of the active link
        let li = activeLink.closest(".toc-item");
        while (li) {
          li.classList.add("toc-expanded");
          const parentChildren = li.parentElement;
          if (parentChildren && parentChildren.classList.contains("toc-children")) {
            const parentItem = parentChildren.parentElement;
            if (parentItem && parentItem.classList.contains("toc-item")) {
              li = parentItem;
              continue;
            }
          }
          break;
        }
      }

      function updateFromScroll() {
        const offsetTopTarget = 80; // approx from top where we consider "active"
        let bestHeading = null;
        let bestOffset = -Infinity;

        headings.forEach(h => {
          const rect = h.getBoundingClientRect();
          const offset = rect.top - offsetTopTarget;
          // we want headings whose top is <= offsetTopTarget, choose one closest to it
          if (offset <= 0 && offset > bestOffset) {
            bestOffset = offset;
            bestHeading = h;
          }
        });

        // If none is above the line yet (top of page), just take the first heading
        if (!bestHeading) {
          bestHeading = headings[0];
        }

        setActiveByHeading(bestHeading);
      }

      // Run once on load
      updateFromScroll();

      // And on scroll
      window.addEventListener("scroll", updateFromScroll);
    }

    /* ========== AUTO-CLOSE ACCORDION FOR EXPANDABLES ========== */
    function initExpandAccordion() {
      const boxes = document.querySelectorAll("details.expand-box");

      boxes.forEach(box => {
        box.addEventListener("toggle", () => {
          if (box.open) {
            boxes.forEach(other => {
              if (other !== box) other.open = false;
            });
          }
        });
      });
    }

    includeHTML();
  </script>

</body>
</html>
