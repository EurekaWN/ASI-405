<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robot Design Report</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- model-viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    html { scroll-behavior: smooth; }

    /* ---------------------------------------------------- */
    /* GLOBAL FONT + BASE STYLES */
    /* ---------------------------------------------------- */
    * {
      font-family: "Times New Roman", Times, serif;
      font-size: 12pt;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #dfe4f0;
      display: flex;
    }

    p, li {
      line-height: 1.5;
    }

    /* ---------------------------------------------------- */
    /* SIDEBAR */
    /* ---------------------------------------------------- */
    #sidebar {
      width: 260px;
      background: #111827;
      color: #ddd;
      padding: 20px 16px;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    #sidebar h2 {
      color: #fff;
      margin: 0 0 12px 0;
      font-size: 14pt;
    }

    .toc-item { list-style: none; margin: 4px 0; }

    .toc-link {
      color: #d1d5db;
      text-decoration: none;
      padding: 6px 8px;
      display: block;
      border-radius: 6px;
      transition: 0.15s;
    }

    .toc-link:hover {
      background: #374151;
      color: #fff;
    }

    .active-link {
      background: #2563eb !important;
      color: #fff !important;
      font-weight: bold;
    }

    /* LEVEL INDENTATION */
    .toc-level-1 { margin-left: 0; }
    .toc-level-2 { margin-left: 16px; }
    .toc-level-3 { margin-left: 32px; }

    /* Children container */
    .toc-children {
      display: none;
      margin-left: 12px;
      border-left: 1px solid #555;
      padding-left: 8px;
    }

    .toc-expanded > .toc-children {
      display: block;
    }

    /* ---------------------------------------------------- */
    /* REPORT WRAPPER */
    /* ---------------------------------------------------- */
    .report-wrapper {
      max-width: 900px;
      margin: 24px auto;
      padding: 0 12px;
      flex-grow: 1;
    }

    [include-html] {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 10px;
      padding: 32px 40px;
      margin-bottom: 24px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    /* ---------------------------------------------------- */
    /* TITLES + SECTION DIVIDER LINE */
    /* ---------------------------------------------------- */
    .section-title,
    .subsection-title,
    .subsubsection-title,
    .subsubsubsection-title {
      position: relative;
      padding-top: 26px;
      margin-top: 40px;
      line-height: 1.5;
    }

    .section-title::before,
    .subsection-title::before,
    .subsubsection-title::before,
    .subsubsubsection-title::before {
      content: "";
      position: absolute;
      top: 8px;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(
        to right,
        rgba(0,0,0,0.10),
        rgba(0,0,0,0.25),
        rgba(0,0,0,0.10)
      );
      border-radius: 2px;
    }

    /* Title sizes */
    .section-title { font-size: 20pt; font-weight: bold; }
    .subsection-title { font-size: 16pt; font-weight: bold; }
    .subsubsection-title { font-size: 14pt; font-weight: bold; font-style: normal; }
    .subsubsubsection-title { font-size: 12pt; font-weight: bold; text-decoration: underline; }

    /* ===================================================== */
/* EXPANDABLE BOX (FULL FINAL VERSION) */
/* ===================================================== */

details.expand-box {
  margin: 14px 0 20px 0;
  padding: 14px 16px;
  border-radius: 8px;
  background: rgba(230, 236, 255, 0.55);
  cursor: pointer;
  border: 1px solid rgba(140, 160, 220, 0.3);
  transition: 0.25s ease;
}

/* SUMMARY — remove ALL browser defaults */
details.expand-box summary {
  cursor: pointer;
  list-style: none;
  margin: 0;                 /* remove default margin */
  padding: 0;                /* remove left indent */
  font-weight: bold;
  display: flex;
  align-items: center;
}

/* Remove default triangles across browsers */
details.expand-box summary::-webkit-details-marker { display: none; }
details.expand-box summary::marker { content: ""; }

/* Custom arrow */
details.expand-box summary::before {
  content: "▶";
  font-size: 11pt;
  margin-right: 6px;
  transition: transform 0.2s ease;
}

/* Arrow rotates when opened */
details.expand-box[open] summary::before {
  content: "▼";
}

/* Highlight background when open */
details.expand-box[open] {
  background: rgba(210, 220, 255, 0.65);
  border-color: rgba(90, 110, 200, 0.45);
}

/* ===================================================== */
/* FIXED: Remove divider lines inside expandable boxes */
/* ===================================================== */
details.expand-box .section-title::before,
details.expand-box .subsection-title::before,
details.expand-box .subsubsection-title::before,
details.expand-box .subsubsubsection-title::before {
  display: none !important;
}

/* ===================================================== */
/* FIXED: Remove extra top spacing when heading is inside <summary> */
/* ===================================================== */
details.expand-box summary.section-title,
details.expand-box summary.subsection-title,
details.expand-box summary.subsubsection-title,
details.expand-box summary.subsubsubsection-title {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

  </style>

</head>

<body>

  <!-- SIDEBAR -->
  <nav id="sidebar">
    <h2>Contents</h2>
    <ul id="toc-root"></ul>
  </nav>

  <!-- MAIN CONTENT -->
  <div class="report-wrapper">

    <div include-html="Front Page.html"></div>
    <div include-html="../3D Renders.html"></div>

    <div id="sec-1-introduction" include-html="Disclaimer.html"></div>
    <div id="sec-1-introduction" include-html="1. Introduction.html"></div>

    <div id="sec-2-competition" include-html="2. Competition Background Information.html"></div>
    <div id="sec-3-problem" include-html="3. Problem Clarification.html"></div>
    <div id="sec-4-design-thinking" include-html="4. Design Thinking Process.html"></div>
    <div id="sec-5-finalised" include-html="5. Finalised Main Design Concept Validation and Prototyping.html"></div>
    <div id="sec-6-prototyping" include-html="6. Overall Prototyping Testing.html"></div>
    <div id="sec-7-forward" include-html="7. Moving Forward.html"></div>
    <div id="sec-8-conclusion" include-html="8. Conclusion.html"></div>
    <div include-html="References.html"></div>

  </div>


  <!-- JS SECTION -->
  <script>

    /* ========== INCLUDE HTML PARTIALS ========== */
    async function includeHTML() {
      const elements = document.querySelectorAll("[include-html]");
      for (const el of elements) {
        const file = el.getAttribute("include-html");
        try {
          const resp = await fetch(file);
          el.innerHTML = resp.ok ? await resp.text() : "Include error: " + resp.status;
        } catch (err) {
          el.innerHTML = "Include error: " + err;
        }
      }

      generateTOC();
      initScrollSpy();
      initExpandAccordion();   /* accordion enabled */
    }

    /* ========== TOC GENERATOR ========== */
    function generateTOC() {
      const tocRoot = document.getElementById("toc-root");

      const headings = document.querySelectorAll(
        ".section-title, .subsection-title, .subsubsection-title"
      );

      let lastLevel1 = null;
      let lastLevel2 = null;

      headings.forEach(h => {
        const text = h.textContent.trim();
        const sec = h.closest("section");
        if (!sec) return;

        const id = sec.id;
        if (!id) return;

        let level = 1;
        if (h.classList.contains("subsection-title")) level = 2;
        if (h.classList.contains("subsubsection-title")) level = 3;

        const li = document.createElement("li");
        li.classList.add("toc-item", `toc-level-${level}`);

        const link = document.createElement("a");
        link.classList.add("toc-link");
        link.href = "#" + id;
        link.textContent = text;
        li.appendChild(link);

        if (level === 1) {
          li.innerHTML += `<ul class="toc-children"></ul>`;
          tocRoot.appendChild(li);
          lastLevel1 = li;
        }

        if (level === 2 && lastLevel1) {
          lastLevel1.classList.add("toc-expanded");
          lastLevel1.querySelector(".toc-children").appendChild(li);
          li.innerHTML += `<ul class="toc-children"></ul>`;
          lastLevel2 = li;
        }

        if (level === 3 && lastLevel2) {
          lastLevel2.classList.add("toc-expanded");
          lastLevel2.querySelector(".toc-children").appendChild(li);
        }
      });
    }

    /* ========== SCROLL SPY ========== */
    function initScrollSpy() {
      const links = document.querySelectorAll(".toc-link");

      const sections = [...links].map(link => {
        const sec = document.querySelector(link.getAttribute("href"));
        return { link, sec };
      });

      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (!entry.isIntersecting) return;

            links.forEach(l => l.classList.remove("active-link"));

            const active = sections.find(s => s.sec === entry.target);
            if (active) active.link.classList.add("active-link");
          });
        },
        { threshold: 0.45 }
      );

      sections.forEach(s => s.sec && observer.observe(s.sec));
    }

    /* ========== AUTO-CLOSE ACCORDION ========== */
    function initExpandAccordion() {
      const boxes = document.querySelectorAll("details.expand-box");

      boxes.forEach(box => {
        box.addEventListener("toggle", () => {
          if (box.open) {
            boxes.forEach(other => {
              if (other !== box) other.open = false;
            });
          }
        });
      });
    }

    includeHTML();
  </script>

</body>
</html>
